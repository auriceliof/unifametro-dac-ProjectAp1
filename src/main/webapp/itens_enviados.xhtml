<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
	<title>Listing</title>
</h:head>

<h:body>	
		
	<h:form id="form">
	
		<p:panel header="Página de Listagem de Emails">
			<div style="display: flex; justify-content: space-around; margin-bottom: 15px;">
				
				<p:linkButton action="Enviar_email" outcome="envio_email" value="Enviar" 
					style="border: 5px solid; 
					border-radius: 25px; 
					margin-right: 10px;
					width: 8rem;
					padding: 1px 0 5px 9px;"/>
					
				<p:linkButton action="Visualizar_email" outcome="visualizar_email" value="Visualizar" 
					style="border: 5px solid; 
					border-radius: 25px; 
					background-color: #f39c12;
					margin-right: 10px;
					width: 8rem;
					padding: 1px 0 5px 9px;"/>	
					
				
				<p:linkButton action="editar_email" outcome="editar_email" value="Editar" 
					style="border: 5px solid; 
					border-radius: 25px; 
					background-color: #8e44ad;
					margin-right: 10px;
					width: 8rem;
					padding: 1px 0 5px 15px;"/>
					
				<p:linkButton action="excluir_email" outcome="excluir_email" value="Excluir" 
					style="border: 5px solid; 
					border-radius: 25px; 
					background-color: #e55039;
					margin-right: 10px;
					width: 8rem;
					padding: 1px 0 5px 15px;"/>
				
							
				<p:commandButton value="Estatística" type="button" icon="pi pi-external-link" onclick="PF('dlg1').show()"
					style="border: 5px solid; 
					border-radius: 25px; 
					background-color: #f78fb3;
					margin-right: 10px;
					width: 8rem;
					padding: 1px 0 5px 5px;"/>
				
				<p:dialog header="Quantide de Emails" widgetVar="dlg1" minHeight="40" width="350" showEffect="fade">
	   				 <p class="m-0"><p:outputLabel value="#{emailBean.contarEmail}"/></p>
				</p:dialog>	
								
			</div>
			
			<p:dataTable value="#{emailBean.list}" var="l" selection="#{emailBean.email}" selectionMode="single" rowKey="#{l.id}">	
								
				<p:column headerText="Id">
					<p:column>
						<p:outputLabel value="#{l.id}"/>							
					</p:column>										
				</p:column>
				<p:column headerText="Destionatário">
					<p:column>
						<p:outputLabel value="#{l.destinatario}"/>							
					</p:column>										
				</p:column>
				<p:column headerText="Corpo">
					<p:column>
						<p:outputLabel value="#{l.corpo}"/>							
					</p:column>										
				</p:column>
				<p:column headerText="Data de envio">
					<p:column>
						<p:outputLabel value="#{l.dataEnvio}">
							<f:convertDateTime pattern="dd/MM/YYYY"/>
						</p:outputLabel>							
					</p:column>										
				</p:column>
				<p:column headerText="Confirma leitura">
					<p:column>
						<p:outputLabel value="#{l.confirmaLeitura}"/>							
					</p:column>										
				</p:column>
				<p:column></p:column>
				
				<p:column headerText="Ações">
					<p:column>
						<p:commandButton value="Editar" oncomplete="PF('editar').show()" update="form_edit"
							style="border: 5px solid; 
							border-radius: 25px; 
							background-color: #8e44ad;
							margin-right: 10px;
							width: 8rem;">
							<f:setPropertyActionListener value="#{l}" target="#{emailBean.email}"/>							
						</p:commandButton>									
					</p:column>		
					
					<p:column>
						<p:commandButton value="Visualizar" oncomplete="PF('visualizar').show()" update="form_view"
							style="border: 5px solid; 
							border-radius: 25px; 
							background-color: #f39c12;
							margin-right: 10px;
							width: 8rem;">
							<f:setPropertyActionListener value="#{l}" target="#{emailBean.email}"/>							
						</p:commandButton>
															
					</p:column>										
				
												
				</p:column>
							
			</p:dataTable>
			
		</p:panel>
	
	</h:form>

	<p:dialog header="Editar Email" widgetVar="editar" modal="true" resizeble="false" showEffect="fade" hideEffect="fade">
		<h:form id="form_edit">
			<p:panelGrid columns="2" cellpadding="5" id="editar">
					<p:outputLabel for="destinatario" value="Destinatário: "/>
					<p:inputText id="destinatario" value="#{emailBean.email.destinatario}" required="true" requiredMessage="Campo Obrigatorio"/>
					
					<p:outputLabel for="corpo" value="Corpo: "/>
					<p:inputTextarea id="corpo" value="#{emailBean.email.corpo}"/>				
					
					<p:outputLabel for="dataEnvio" value="Data de Envio: "/>
					<p:datePicker id="dataEnvio" value="#{emailBean.email.dataEnvio}"/>
					
					<p:outputLabel for="confirmaLeitura" value="Confirma Leitura: "/>
					<p:selectBooleanCheckbox id="confirmaLeitura" value="#{emailBean.email.confirmaLeitura}"/>
									
				</p:panelGrid>
				
				<p:commandButton value="Atualizar" action="#{emailBean.editar}" oncomplete="PF('editar').hide()" update="form"/>	
				
		</h:form>
	
	</p:dialog>		
	
	<p:dialog header="Visualizar Email" widgetVar="visualizar" modal="true" resizeble="false" showEffect="fade" hideEffect="fade">
		<h:form id="form_view" >
			<p:panelGrid columns="2" cellpadding="5" id="visualizar">
					<p:outputLabel for="destinatario" value="Destinatário: "/>
					<p:inputText id="destinatario" value="#{emailBean.email.destinatario}" disabled="true"/>
					
					<p:outputLabel for="corpo" value="Corpo: "/>
					<p:inputTextarea id="corpo" value="#{emailBean.email.corpo}" disabled="true"/>				
					
					<p:outputLabel for="dataEnvio" value="Data de Envio: "/>
					<p:datePicker id="dataEnvio" value="#{emailBean.email.dataEnvio}" disabled="true"/>
					
					<p:outputLabel for="confirmaLeitura" value="Confirma Leitura: " />
					<p:selectBooleanCheckbox id="confirmaLeitura" value="#{emailBean.email.confirmaLeitura}" disabled="true"/>			
							
				</p:panelGrid>
				
				<p:commandButton value="Fechar" oncomplete="PF('visualizar').hide()" update="form"/>	
				
		</h:form>
	
	</p:dialog>			
	

</h:body>

</html>
