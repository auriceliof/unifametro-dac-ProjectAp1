<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

	<h:head><title>Editing</title></h:head>
	
	<h:body>
		<h:form id="form">
			<p:messages id="messages" showDetail="true" closable="true">
				<p:autoUpdate />
			</p:messages>
			
			<p:panel header="Página de Edição de E-mail">
			
			<div>
				<p:link outcome="itens_enviados" value="voltar" 
					style="display: flex;
					justify-content: end; 
					margin-bottom: 10px;
					margin-top: 10px;"/>		
			</div>
				
				<h:panelGrid columns="2">
					
					<p:outputLabel value="Escolha um email:  " for="tipo"/>
					<p:selectOneMenu id="tipo" value="#{emailBean.email.id}">	
						<f:selectItem itemLabel="" update="form" />	
						<f:selectItems value="#{emailBean.list}" var="l" itemLabel="#{l.destinatario}" itemValue="#{l.id}" />				
					
						<p>
						<p:commandButton value="Editar" oncomplete="PF('editar').show()" update="form2">
							<f:setPropertyActionListener value="#{l}" target="#{emailBean.email}"/>							
						</p:commandButton>									
						
						</p>
					</p:selectOneMenu>
				</h:panelGrid>
				
					<h:form id="form2">
						<h:panelGrid columns="2" cellpadding="5" id="editar">
							<p:outputLabel for="destinatario" value="Destinatário: "/>
							<p:inputText id="destinatario" value="#{emailBean.email.destinatario}"/>
							
							<p:outputLabel for="corpo" value="Corpo: "/>
							<p:inputTextarea id="corpo" value="#{emailBean.email.corpo}"/>				
							
							<p:outputLabel for="dataEnvio" value="Data de Envio: "/>
							<p:datePicker id="dataEnvio" value="#{emailBean.email.dataEnvio}"/>
							
							<p:outputLabel for="confirmaLeitura" value="Confirma Leitura: "/>
							<p:selectBooleanCheckbox id="confirmaLeitura" value="#{emailBean.email.confirmaLeitura}"/>					
						</h:panelGrid>
					</h:form>
					
																	
					<p:commandButton value="Atualizar" action="#{emailBean.editar}" update="form"
						style="border: 5px solid; 
						border-radius: 25px; 
						background-color: #8e44ad;
						margin-right: 10px;
						width: 8rem;
						padding: 1px 0 5px 5px;"/>

				
			</p:panel>
		</h:form>
	</h:body>
	
	
	
	
	
</html>
